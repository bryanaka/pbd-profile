<script>
	var AppSettings = {};
	<% if current_user %>
		<% tmp_user = current_user %>
		AppSettings.current_user = JSON.parse('<%=raw tmp_user.to_json %>');
		AppSettings.current_user_roles = JSON.parse('<%=raw tmp_user.roles.to_json %>');
	<% else %>
		AppSettings.current_user = {
			scientist_id: null
		};
		AppSettings.current_user_roles = null;
	<% end %>
	AppSettings.current_roles = function () {
		var roles = _.pluck(AppSettings.current_user_roles, 'name');
		return roles;
	}
	AppSettings.has_role = function (role) {
		var currentRoles = AppSettings.current_roles(),
			numberOfRoles = currentRoles.length,
			roleMatch = false;
		for (var i = 0, n = numberOfRoles; i <= n; i++) {
			if (currentRoles[i] === role) {
				roleMatch = true;
				return true
			} else {
				roleMatch = false;
			}
		}
		return false;
		//
		//if ( _.isArray(roles) ) {
		//	var matches = [];
		//	_.each(check_role, function (role, role_index, role_list){
		//		matches.push( check_role(role) );
		//	});
		//	var found = _.findWhere(matches, true);
		//	if (found != null) {
		//		return true;
		//	} else {
		//		return false;
		//	}
		//} else {
		//	check_role(roles);
		//}
	};
</script>